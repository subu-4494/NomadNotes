{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{getNotes,deleteNote}from\"../../services/api\";import{useNavigate}from\"react-router-dom\";import\"./dashboard.css\";import PostCard from\"./postcard\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function Dashboard(){const[notes,setNotes]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const[modalImages,setModalImages]=useState([]);const[currentImageIndex,setCurrentImageIndex]=useState(0);const[isModalOpen,setIsModalOpen]=useState(false);const navigate=useNavigate();useEffect(()=>{fetchNotes();},[]);async function fetchNotes(){setLoading(true);setError(null);try{const data=await getNotes();setNotes(data);}catch(err){setError((err===null||err===void 0?void 0:err.message)||\"Failed to load notes.\");}finally{setLoading(false);}}async function handleDelete(id){if(window.confirm(\"Are you sure you want to delete this note?\")){try{await deleteNote(id);setNotes(prevNotes=>prevNotes.filter(note=>note._id!==id));}catch(err){alert((err===null||err===void 0?void 0:err.message)||\"Failed to delete note.\");}}}function handleUpdate(id){navigate(\"/notes/edit/\".concat(id));}function handleCreate(){navigate(\"/notes/create\");}function handleLogout(){if(window.confirm(\"Are you sure you want to logout?\")){localStorage.clear();navigate(\"/login\");}}function openModal(images,index){setModalImages(images);setCurrentImageIndex(index);setIsModalOpen(true);}function closeModal(){setIsModalOpen(false);setModalImages([]);setCurrentImageIndex(0);}function goToNextImage(){setCurrentImageIndex(prev=>(prev+1)%modalImages.length);}function goToPreviousImage(){setCurrentImageIndex(prev=>(prev-1+modalImages.length)%modalImages.length);}const username=localStorage.getItem(\"username\")||\"User\";return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"video-background\",children:[[...Array(9)].map((_,i)=>/*#__PURE__*/_jsx(\"video\",{src:\"/assets/vid\".concat(i+1,\".mp4\"),autoPlay:true,loop:true,muted:true},i)),/*#__PURE__*/_jsx(\"div\",{className:\"video-overlay\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Welcome, \",username]}),/*#__PURE__*/_jsxs(\"p\",{style:{fontSize:\"16px\",color:\"#fff\",marginTop:\"5px\"},children:[\"\\u2708\\uFE0F Tell me, how was your last trip \",username,\"?\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,children:\"Logout\"})]}),loading&&/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading your notes...\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsx(\"div\",{className:\"create-post-wrapper\",style:{margin:\"20px 0\",textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"button\",{onClick:handleCreate,className:\"create-post-button\",children:\"Create New Post\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"notes-list\",children:notes.map(note=>/*#__PURE__*/_jsx(PostCard,{note:note,openModal:openModal,handleDelete:handleDelete},note._id))}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:closeModal,children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsx(\"img\",{src:modalImages[currentImageIndex],alt:\"Zoomed\",className:\"modal-image\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeModal,children:\"\\xD7\"}),modalImages.length>1&&/*#__PURE__*/_jsxs(\"div\",{className:\"carousel-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"carousel-button\",onClick:goToPreviousImage,children:\"\\u2190\"}),/*#__PURE__*/_jsx(\"button\",{className:\"carousel-button\",onClick:goToNextImage,children:\"\\u2192\"})]})]})})]})]});}export default Dashboard;","map":{"version":3,"names":["React","useEffect","useState","getNotes","deleteNote","useNavigate","PostCard","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","notes","setNotes","loading","setLoading","error","setError","modalImages","setModalImages","currentImageIndex","setCurrentImageIndex","isModalOpen","setIsModalOpen","navigate","fetchNotes","data","err","message","handleDelete","id","window","confirm","prevNotes","filter","note","_id","alert","handleUpdate","concat","handleCreate","handleLogout","localStorage","clear","openModal","images","index","closeModal","goToNextImage","prev","length","goToPreviousImage","username","getItem","children","className","Array","map","_","i","src","autoPlay","loop","muted","style","fontSize","color","marginTop","onClick","margin","textAlign","e","stopPropagation","alt"],"sources":["D:/web development/Projects/NomadNotes/frontend/src/components/auth/dashboard.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { getNotes, deleteNote } from \"../../services/api\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport \"./dashboard.css\";\r\nimport PostCard from \"./postcard\";\r\n\r\nfunction Dashboard() {\r\n  const [notes, setNotes] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [modalImages, setModalImages] = useState([]);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    fetchNotes();\r\n  }, []);\r\n\r\n  async function fetchNotes() {\r\n    setLoading(true);\r\n    setError(null);\r\n    try {\r\n      const data = await getNotes();\r\n      setNotes(data);\r\n    } catch (err) {\r\n      setError(err?.message || \"Failed to load notes.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }\r\n\r\n  async function handleDelete(id) {\r\n    if (window.confirm(\"Are you sure you want to delete this note?\")) {\r\n      try {\r\n        await deleteNote(id);\r\n        setNotes((prevNotes) => prevNotes.filter((note) => note._id !== id));\r\n      } catch (err) {\r\n        alert(err?.message || \"Failed to delete note.\");\r\n      }\r\n    }\r\n  }\r\n\r\n  function handleUpdate(id) {\r\n    navigate(`/notes/edit/${id}`);\r\n  }\r\n\r\n  function handleCreate() {\r\n    navigate(\"/notes/create\");\r\n  }\r\n\r\n  function handleLogout() {\r\n    if (window.confirm(\"Are you sure you want to logout?\")) {\r\n      localStorage.clear();\r\n      navigate(\"/login\");\r\n    }\r\n  }\r\n\r\n  function openModal(images, index) {\r\n    setModalImages(images);\r\n    setCurrentImageIndex(index);\r\n    setIsModalOpen(true);\r\n  }\r\n\r\n  function closeModal() {\r\n    setIsModalOpen(false);\r\n    setModalImages([]);\r\n    setCurrentImageIndex(0);\r\n  }\r\n\r\n  function goToNextImage() {\r\n    setCurrentImageIndex((prev) => (prev + 1) % modalImages.length);\r\n  }\r\n\r\n  function goToPreviousImage() {\r\n    setCurrentImageIndex((prev) => (prev - 1 + modalImages.length) % modalImages.length);\r\n  }\r\n\r\n  const username = localStorage.getItem(\"username\") || \"User\";\r\n\r\n  return (\r\n    <>\r\n      {/*  Video Background */}\r\n      <div className=\"video-background\">\r\n        {[...Array(9)].map((_, i) => (\r\n          <video\r\n            key={i}\r\n            src={`/assets/vid${i + 1}.mp4`}\r\n            autoPlay\r\n            loop\r\n            muted\r\n          />\r\n        ))}\r\n        <div className=\"video-overlay\"></div>\r\n      </div>\r\n\r\n      <div className=\"dashboard-container\">\r\n        <header className=\"dashboard-header\">\r\n          <h1>Welcome, {username}</h1>\r\n          <p style={{ fontSize: \"16px\", color: \"#fff\", marginTop: \"5px\" }}>\r\n            ✈️ Tell me, how was your last trip {username}?\r\n          </p>\r\n          <button onClick={handleLogout}>Logout</button>\r\n        </header>\r\n\r\n        {loading && <p className=\"loading-text\">Loading your notes...</p>}\r\n        {error && <p className=\"error\">{error}</p>}\r\n\r\n        <div\r\n          className=\"create-post-wrapper\"\r\n          style={{ margin: \"20px 0\", textAlign: \"center\" }}\r\n        >\r\n          <button onClick={handleCreate} className=\"create-post-button\">\r\n            Create New Post\r\n          </button>\r\n        </div>\r\n\r\n        <div className=\"notes-list\">\r\n          {notes.map((note) => (\r\n            <PostCard\r\n              key={note._id}\r\n              note={note}\r\n              openModal={openModal}\r\n              handleDelete={handleDelete}\r\n            />\r\n          ))}\r\n        </div>\r\n\r\n        {isModalOpen && (\r\n          <div className=\"modal-overlay\" onClick={closeModal}>\r\n            <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\r\n              <img\r\n                src={modalImages[currentImageIndex]}\r\n                alt=\"Zoomed\"\r\n                className=\"modal-image\"\r\n              />\r\n              <button className=\"modal-close\" onClick={closeModal}>\r\n                &times;\r\n              </button>\r\n\r\n              {modalImages.length > 1 && (\r\n                <div className=\"carousel-controls\">\r\n                  <button\r\n                    className=\"carousel-button\"\r\n                    onClick={goToPreviousImage}\r\n                  >\r\n                    &#8592;\r\n                  </button>\r\n                  <button className=\"carousel-button\" onClick={goToNextImage}>\r\n                    &#8594;\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Dashboard;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}